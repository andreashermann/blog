---
layout: post
title: XML Processing with FastInfoset
---

Wer schon einmal eine Applikation konstruiert hat, welche grosse Mengen von XML-Daten verarbeitet, ist bestimmt schon an den Punkt gelangt, wo die Dauer der Verarbeitung durch die I/O-Geschwindigkeit dominiert wurde.<br /><div><br /></div><div>XML als Format ist oft eine sehr gute Wahl. Die ganze Welt von soliden Tools zur Verarbeitung von XML-Daten erleichtern den Umgang mit den Daten enorm. Ich möchte diese Tools nicht missen. Trotzdem wäre es schön, die Geschwindigkeit der Verarbeitung steigern zu können.</div><div>Es gibt mehrere Ansätze dazu.</div><div><br /></div><div><b>Komprimieren der XML-Daten vor und nach der Verarbeitung</b></div><div>Der oft gewählte einfache Ansatz ist, die XML-Daten beispielsweise mit GZip zu komprimieren. Das verringert zwar den Speicherbedarf, erhöht aber die Verarbeitungsgeschwindigkeit nicht zwingend.</div><div><br /></div><div><b>Effizientere Kodierung der Informationen</b></div><div>Fast Infoset ist ein Standard [1] welcher eine binäre Kodierung für XML beschreibt. Der Standard versucht den Speicherplatz zu verkleinern und die Verarbeitungsgeschwindigkeit zu erhöhen.</div><div>Der typische Geschwindigkeitszuwachs beträgt etwa Faktor 10 gegenüber Java Xerces&nbsp;[2]&nbsp;und der Speicherplatzbedarf beträgt in etwa 30% Prozent der Originalgrösse.&nbsp;</div><div>Der Grosse Vorteil dieser Enkodierung ist jedoch, dass sich Applikationen mit minimalem Aufwand darauf erweitern lassen. Die Implementierung von Sun bringt bereits Unterstützung für die XML Standards SAX, StAX und DOM mit&nbsp;[3].</div><div>Eine Alternative zu dieser Enkodierung ist der W3C-Vorschlag "Efficient XML Interchange" [4].</div><div><br /></div><div><b>StAX XMLWriter mit Fast Infoset</b><br /><pre class="brush: java">StAXDocumentSerializer serializer = new StAXDocumentSerializer();<br />serializer.setEncoding("UTF-8");<br />serializer.setOutputStream(out);<br />serializer.writeStartDocument();<br />serializer.writeStartElement("root");<br />serializer.writeStartElement("record");<br />serializer.writeCharacters("abcdef123456");<br />serializer.writeEndElement("record");<br />serializer.writeEndElement("root");<br />serializer.writeEndDocument();</pre><b><br /></b></div><div><b>SAX Parser mit Fast Infoset</b><br /><pre class="brush: java">InputStream in = ...<br />ContentHandler contentHandler = ...<br />InputSource = new InputSource(in);<br />XMLReader reader = new SAXDocumentParser();<br />reader.setContentHandler(contentHandler);<br />reader.parse(source);</pre><b><br /></b></div><div>[1]&nbsp;<a href="http://java.sun.com/developer/technicalArticles/xml/fastinfoset/">http://java.sun.com/developer/technicalArticles/xml/fastinfoset/</a></div><div>[2]&nbsp;<a href="http://fi.java.net/reports/parsing/report.html">http://fi.java.net/reports/parsing/report.html</a></div><div>[3]&nbsp;<a href="http://fi.java.net/">http://fi.java.net/</a></div><div>[4]&nbsp;<a href="http://en.wikipedia.org/wiki/Efficient_XML_Interchange">http://en.wikipedia.org/wiki/Efficient_XML_Interchange</a></div>
